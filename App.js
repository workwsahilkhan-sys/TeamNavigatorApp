import React, { useState, useEffect } from 'react';\nimport { StyleSheet, View, Text, TouchableOpacity } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport MapView, { Marker } from 'react-native-maps';\nimport * as Location from 'expo-location';\nimport { Magnetometer } from 'expo-sensors';\n\nconst Stack = createStackNavigator();\n\nfunction MapScreen() {\n  const [location, setLocation] = useState(null);\n  const [heading, setHeading] = useState(0);\n  const [elevation, setElevation] = useState(0);\n\n  useEffect(() => {\n    (async () => {\n      let { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        alert('Permission to access location was denied');\n        return;\n      }\n\n      let loc = await Location.getCurrentPositionAsync({});\n      setLocation(loc);\n      setElevation(loc.coords.altitude);\n    })();\n\n    Magnetometer.addListener((data) => {\n      let angle = Math.atan2(data.y, data.x) * (180 / Math.PI);\n      setHeading(angle);\n    });\n    Magnetometer.setUpdateInterval(100);\n\n    return () => {\n      Magnetometer.removeAllListeners();\n    };\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <MapView\n        style={styles.map}\n        initialRegion={{\n          latitude: location ? location.coords.latitude : 37.78825,\n          longitude: location ? location.coords.longitude : -122.4324,\n          latitudeDelta: 0.0922,\n          longitudeDelta: 0.0421,\n        }}\n        showsUserLocation={true}\n        showsCompass={true}\n      >\n        {location && (\n          <Marker\n            coordinate={{\n              latitude: location.coords.latitude,\n              longitude: location.coords.longitude,\n            }}\n            title=\"You\"\n          />\n        )}\n      </MapView>\n      <View style={styles.overlay}>\n        <Text>Lat: {location ? location.coords.latitude.toFixed(6) : 'Loading'}</Text>\n        <Text>Lon: {location ? location.coords.longitude.toFixed(6) : 'Loading'}</Text>\n        <Text>Heading: {heading.toFixed(0)}Â°</Text>\n        <Text>Elevation: {elevation.toFixed(0)}m</Text>\n      </View>\n    </View>\n  );\n}\n\nfunction TeammatesScreen() {\n  return (\n    <View style={styles.container}>\n      <Text>Teammates Screen</Text>\n    </View>\n  );\n}\n\nfunction ChatScreen() {\n  return (\n    <View style={styles.container}>\n      <Text>Chat Screen</Text>\n    </View>\n  );\n}\n\nexport default function App() {\n  return (\n    <NavigationContainer>\n      <Stack.Navigator initialRouteName=\"Map\">\n        <Stack.Screen name=\"Map\" component={MapScreen} />\n        <Stack.Screen name=\"Teammates\" component={TeammatesScreen} />\n        <Stack.Screen name=\"Chat\" component={ChatScreen} />\n      </Stack.Navigator>\n    </NavigationContainer>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  map: {\n    width: '100%',\n    height: '100%',\n  },\n  overlay: {\n    position: 'absolute',\n    top: 50,\n    left: 10,\n    backgroundColor: 'rgba(255,255,255,0.8)',\n    padding: 10,\n    borderRadius: 5,\n  },\n});\n